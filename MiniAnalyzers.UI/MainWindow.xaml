<Window x:Class="MiniAnalyzers.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mini Analyzers" Height="520" Width="960">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Path box + buttons -->
        <TextBox x:Name="txtPath" Grid.Row="0" Grid.Column="0" Margin="0,0,8,8"
             ToolTip="Path to .sln or .csproj" />
        <Button x:Name="btnBrowse" Grid.Row="0" Grid.Column="1" Margin="0,0,8,8" Padding="12,4"
            Click="Browse_Click">Browse…</Button>
        <Button x:Name="btnAnalyze" Grid.Row="0" Grid.Column="2" Margin="0,0,0,8" Padding="12,4"
            Click="Analyze_Click">Analyze</Button>
        <Button x:Name="btnCancel" Grid.Row="0" Grid.Column="3" Margin="8,0,0,8" Padding="12,4"
        Click="Cancel_Click" IsEnabled="False">Cancel</Button>

        <!-- Status line -->
        <TextBlock x:Name="txtStatus" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4" Margin="0,0,0,8"
               Foreground="Gray" />

        <!-- Results table -->
        <DataGrid x:Name="grid" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4"
              AutoGenerateColumns="False" IsReadOnly="True"
              ItemsSource="{Binding Results}"
              RowDetailsVisibilityMode="Collapsed"
              MouseDoubleClick="grid_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Project" Binding="{Binding ProjectName}" Width="*" />
                <DataGridTextColumn Header="Id"      Binding="{Binding Id}"          Width="100" />
                <DataGridTextColumn Header="Severity" Binding="{Binding Severity}"    Width="100" />
                <DataGridTextColumn Header="File"    Binding="{Binding FilePath}"    Width="2*" />
                <DataGridTextColumn Header="Line"    Binding="{Binding Line}"        Width="60" />
                <DataGridTextColumn Header="Col"     Binding="{Binding Column}"      Width="60" />
                <DataGridTextColumn Header="Message" Binding="{Binding Message}"     Width="3*" />
            </DataGrid.Columns>

            <DataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <Border Margin="4" Padding="8" BorderThickness="1"
                    BorderBrush="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}">
                        <ScrollViewer HorizontalScrollBarVisibility="Auto"
                              VerticalScrollBarVisibility="Auto">
                            <TextBox Text="{Binding ContextSnippet}"
                             FontFamily="Consolas"
                             FontSize="12"
                             IsReadOnly="True"
                             TextWrapping="NoWrap"
                             Background="{x:Null}"
                             BorderThickness="0"/>
                        </ScrollViewer>
                    </Border>
                </DataTemplate>
            </DataGrid.RowDetailsTemplate>
        </DataGrid>
        
        
    </Grid>

</Window>